{"version":3,"sources":["maplabel.js"],"names":["MapLabel","opt_options","set","setValues","prototype","google","maps","OverlayView","window","changed","prop","drawCanvas_","draw","canvas","canvas_","style","zIndex","get","ctx","getContext","clearRect","width","height","strokeStyle","fillStyle","font","strokeWeight","Number","text","lineWidth","strokeText","fillText","textMeasure","measureText","textWidth","marginLeft","getMarginLeft_","marginTop","onAdd","document","createElement","position","lineJoin","textBaseline","panes","getPanes","mapPane","appendChild","projection","getProjection","latLng","pos","fromLatLngToDivPixel","y","x","getVisible_","minZoom","maxZoom","undefined","map","getMap","mapZoom","getZoom","onRemove","parentNode","removeChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;AAkBA;;;;;;;AAOA;;;;;;AAMA,SAASA,QAAT,CAAkBC,WAAlB,EAA+B;AAC7B,OAAKC,GAAL,CAAS,YAAT,EAAuB,YAAvB;AACA,OAAKA,GAAL,CAAS,UAAT,EAAqB,EAArB;AACA,OAAKA,GAAL,CAAS,WAAT,EAAsB,SAAtB;AACA,OAAKA,GAAL,CAAS,cAAT,EAAyB,CAAzB;AACA,OAAKA,GAAL,CAAS,aAAT,EAAwB,SAAxB;AACA,OAAKA,GAAL,CAAS,OAAT,EAAkB,QAAlB;;AAEA,OAAKA,GAAL,CAAS,QAAT,EAAmB,GAAnB;;AAEA,OAAKC,SAAL,CAAeF,WAAf;AACD;AACDD,SAASI,SAAT,GAAqB,IAAIC,OAAOC,IAAP,CAAYC,WAAhB,EAArB;;AAEAC,OAAO,UAAP,IAAqBR,QAArB;;AAGA;AACAA,SAASI,SAAT,CAAmBK,OAAnB,GAA6B,UAASC,IAAT,EAAe;AAC1C,UAAQA,IAAR;AACE,SAAK,YAAL;AACA,SAAK,UAAL;AACA,SAAK,WAAL;AACA,SAAK,cAAL;AACA,SAAK,aAAL;AACA,SAAK,OAAL;AACA,SAAK,MAAL;AACE,aAAO,KAAKC,WAAL,EAAP;AACF,SAAK,SAAL;AACA,SAAK,SAAL;AACA,SAAK,UAAL;AACE,aAAO,KAAKC,IAAL,EAAP;AAZJ;AAcD,CAfD;;AAiBA;;;;AAIAZ,SAASI,SAAT,CAAmBO,WAAnB,GAAiC,YAAW;AAC1C,MAAIE,SAAS,KAAKC,OAAlB;AACA,MAAI,CAACD,MAAL,EAAa;;AAEb,MAAIE,QAAQF,OAAOE,KAAnB;AACAA,QAAMC,MAAN,GAAe,mBAAoB,KAAKC,GAAL,CAAS,QAAT,CAAnC;;AAEA,MAAIC,MAAML,OAAOM,UAAP,CAAkB,IAAlB,CAAV;AACAD,MAAIE,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBP,OAAOQ,KAA3B,EAAkCR,OAAOS,MAAzC;AACAJ,MAAIK,WAAJ,GAAkB,KAAKN,GAAL,CAAS,aAAT,CAAlB;AACAC,MAAIM,SAAJ,GAAgB,KAAKP,GAAL,CAAS,WAAT,CAAhB;AACAC,MAAIO,IAAJ,GAAW,KAAKR,GAAL,CAAS,UAAT,IAAuB,KAAvB,GAA+B,KAAKA,GAAL,CAAS,YAAT,CAA1C;;AAEA,MAAIS,eAAeC,OAAO,KAAKV,GAAL,CAAS,cAAT,CAAP,CAAnB;;AAEA,MAAIW,OAAO,KAAKX,GAAL,CAAS,MAAT,CAAX;AACA,MAAIW,IAAJ,EAAU;AACR,QAAIF,YAAJ,EAAkB;AAChBR,UAAIW,SAAJ,GAAgBH,YAAhB;AACAR,UAAIY,UAAJ,CAAeF,IAAf,EAAqBF,YAArB,EAAmCA,YAAnC;AACD;;AAEDR,QAAIa,QAAJ,CAAaH,IAAb,EAAmBF,YAAnB,EAAiCA,YAAjC;;AAEA,QAAIM,cAAcd,IAAIe,WAAJ,CAAgBL,IAAhB,CAAlB;AACA,QAAIM,YAAYF,YAAYX,KAAZ,GAAoBK,YAApC;AACAX,UAAMoB,UAAN,GAAmB,KAAKC,cAAL,CAAoBF,SAApB,IAAiC,IAApD;AACA;AACA;AACAnB,UAAMsB,SAAN,GAAkB,QAAlB;AACD;AACF,CA/BD;;AAiCA;;;AAGArC,SAASI,SAAT,CAAmBkC,KAAnB,GAA2B,YAAW;AACpC,MAAIzB,SAAS,KAAKC,OAAL,GAAeyB,SAASC,aAAT,CAAuB,QAAvB,CAA5B;AACA,MAAIzB,QAAQF,OAAOE,KAAnB;AACAA,QAAM0B,QAAN,GAAiB,UAAjB;;AAEA,MAAIvB,MAAML,OAAOM,UAAP,CAAkB,IAAlB,CAAV;AACAD,MAAIwB,QAAJ,GAAe,OAAf;AACAxB,MAAIyB,YAAJ,GAAmB,KAAnB;;AAEA,OAAKhC,WAAL;;AAEA,MAAIiC,QAAQ,KAAKC,QAAL,EAAZ;AACA,MAAID,KAAJ,EAAW;AACTA,UAAME,OAAN,CAAcC,WAAd,CAA0BlC,MAA1B;AACD;AACF,CAfD;AAgBAb,SAASI,SAAT,CAAmB,OAAnB,IAA8BJ,SAASI,SAAT,CAAmBkC,KAAjD;;AAEA;;;;;;AAMAtC,SAASI,SAAT,CAAmBgC,cAAnB,GAAoC,UAASF,SAAT,EAAoB;AACtD,UAAQ,KAAKjB,GAAL,CAAS,OAAT,CAAR;AACE,SAAK,MAAL;AACE,aAAO,CAAP;AACF,SAAK,OAAL;AACE,aAAO,CAACiB,SAAR;AAJJ;AAMA,SAAOA,YAAY,CAAC,CAApB;AACD,CARD;;AAUA;;;AAGAlC,SAASI,SAAT,CAAmBQ,IAAnB,GAA0B,YAAW;AACnC,MAAIoC,aAAa,KAAKC,aAAL,EAAjB;;AAEA,MAAI,CAACD,UAAL,EAAiB;AACf;AACA;AACD;;AAED,MAAI,CAAC,KAAKlC,OAAV,EAAmB;AACjB;AACA;AACD;;AAED,MAAIoC,SAAS,iCAAmC,KAAKjC,GAAL,CAAS,UAAT,CAAhD;AACA,MAAI,CAACiC,MAAL,EAAa;AACX;AACD;AACD,MAAIC,MAAMH,WAAWI,oBAAX,CAAgCF,MAAhC,CAAV;;AAEA,MAAInC,QAAQ,KAAKD,OAAL,CAAaC,KAAzB;;AAEAA,QAAM,KAAN,IAAeoC,IAAIE,CAAJ,GAAQ,IAAvB;AACAtC,QAAM,MAAN,IAAgBoC,IAAIG,CAAJ,GAAQ,IAAxB;;AAEAvC,QAAM,YAAN,IAAsB,KAAKwC,WAAL,EAAtB;AACD,CAzBD;AA0BAvD,SAASI,SAAT,CAAmB,MAAnB,IAA6BJ,SAASI,SAAT,CAAmBQ,IAAhD;;AAEA;;;;;AAKAZ,SAASI,SAAT,CAAmBmD,WAAnB,GAAiC,YAAW;AAC1C,MAAIC,UAAU,mBAAoB,KAAKvC,GAAL,CAAS,SAAT,CAAlC;AACA,MAAIwC,UAAU,mBAAoB,KAAKxC,GAAL,CAAS,SAAT,CAAlC;;AAEA,MAAIuC,YAAYE,SAAZ,IAAyBD,YAAYC,SAAzC,EAAoD;AAClD,WAAO,EAAP;AACD;;AAED,MAAIC,MAAM,KAAKC,MAAL,EAAV;AACA,MAAI,CAACD,GAAL,EAAU;AACR,WAAO,EAAP;AACD;;AAED,MAAIE,UAAUF,IAAIG,OAAJ,EAAd;AACA,MAAID,UAAUL,OAAV,IAAqBK,UAAUJ,OAAnC,EAA4C;AAC1C,WAAO,QAAP;AACD;AACD,SAAO,EAAP;AACD,CAlBD;;AAoBA;;;AAGAzD,SAASI,SAAT,CAAmB2D,QAAnB,GAA8B,YAAW;AACvC,MAAIlD,SAAS,KAAKC,OAAlB;AACA,MAAID,UAAUA,OAAOmD,UAArB,EAAiC;AAC/BnD,WAAOmD,UAAP,CAAkBC,WAAlB,CAA8BpD,MAA9B;AACD;AACF,CALD;AAMAb,SAASI,SAAT,CAAmB,UAAnB,IAAiCJ,SAASI,SAAT,CAAmB2D,QAApD","file":"maplabel.c9a0dae4.map","sourceRoot":"..","sourcesContent":["/**\n * @license\n *\n * Copyright 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Map Label.\n *\n * @author Luke Mahe (lukem@google.com),\n *         Chris Broadfoot (cbro@google.com)\n */\n\n/**\n * Creates a new Map Label\n * @constructor\n * @extends google.maps.OverlayView\n * @param {Object.<string, *>=} opt_options Optional properties to set.\n */\nfunction MapLabel(opt_options) {\n  this.set('fontFamily', 'sans-serif');\n  this.set('fontSize', 12);\n  this.set('fontColor', '#000000');\n  this.set('strokeWeight', 4);\n  this.set('strokeColor', '#ffffff');\n  this.set('align', 'center');\n\n  this.set('zIndex', 1e3);\n\n  this.setValues(opt_options);\n}\nMapLabel.prototype = new google.maps.OverlayView;\n\nwindow['MapLabel'] = MapLabel;\n\n\n/** @inheritDoc */\nMapLabel.prototype.changed = function(prop) {\n  switch (prop) {\n    case 'fontFamily':\n    case 'fontSize':\n    case 'fontColor':\n    case 'strokeWeight':\n    case 'strokeColor':\n    case 'align':\n    case 'text':\n      return this.drawCanvas_();\n    case 'maxZoom':\n    case 'minZoom':\n    case 'position':\n      return this.draw();\n  }\n};\n\n/**\n * Draws the label to the canvas 2d context.\n * @private\n */\nMapLabel.prototype.drawCanvas_ = function() {\n  var canvas = this.canvas_;\n  if (!canvas) return;\n\n  var style = canvas.style;\n  style.zIndex = /** @type number */(this.get('zIndex'));\n\n  var ctx = canvas.getContext('2d');\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.strokeStyle = this.get('strokeColor');\n  ctx.fillStyle = this.get('fontColor');\n  ctx.font = this.get('fontSize') + 'px ' + this.get('fontFamily');\n\n  var strokeWeight = Number(this.get('strokeWeight'));\n\n  var text = this.get('text');\n  if (text) {\n    if (strokeWeight) {\n      ctx.lineWidth = strokeWeight;\n      ctx.strokeText(text, strokeWeight, strokeWeight);\n    }\n\n    ctx.fillText(text, strokeWeight, strokeWeight);\n\n    var textMeasure = ctx.measureText(text);\n    var textWidth = textMeasure.width + strokeWeight;\n    style.marginLeft = this.getMarginLeft_(textWidth) + 'px';\n    // Bring actual text top in line with desired latitude.\n    // Cheaper than calculating height of text.\n    style.marginTop = '-0.4em';\n  }\n};\n\n/**\n * @inheritDoc\n */\nMapLabel.prototype.onAdd = function() {\n  var canvas = this.canvas_ = document.createElement('canvas');\n  var style = canvas.style;\n  style.position = 'absolute';\n\n  var ctx = canvas.getContext('2d');\n  ctx.lineJoin = 'round';\n  ctx.textBaseline = 'top';\n\n  this.drawCanvas_();\n\n  var panes = this.getPanes();\n  if (panes) {\n    panes.mapPane.appendChild(canvas);\n  }\n};\nMapLabel.prototype['onAdd'] = MapLabel.prototype.onAdd;\n\n/**\n * Gets the appropriate margin-left for the canvas.\n * @private\n * @param {number} textWidth  the width of the text, in pixels.\n * @return {number} the margin-left, in pixels.\n */\nMapLabel.prototype.getMarginLeft_ = function(textWidth) {\n  switch (this.get('align')) {\n    case 'left':\n      return 0;\n    case 'right':\n      return -textWidth;\n  }\n  return textWidth / -2;\n};\n\n/**\n * @inheritDoc\n */\nMapLabel.prototype.draw = function() {\n  var projection = this.getProjection();\n\n  if (!projection) {\n    // The map projection is not ready yet so do nothing\n    return;\n  }\n\n  if (!this.canvas_) {\n    // onAdd has not been called yet.\n    return;\n  }\n\n  var latLng = /** @type {google.maps.LatLng} */ (this.get('position'));\n  if (!latLng) {\n    return;\n  }\n  var pos = projection.fromLatLngToDivPixel(latLng);\n\n  var style = this.canvas_.style;\n\n  style['top'] = pos.y + 'px';\n  style['left'] = pos.x + 'px';\n\n  style['visibility'] = this.getVisible_();\n};\nMapLabel.prototype['draw'] = MapLabel.prototype.draw;\n\n/**\n * Get the visibility of the label.\n * @private\n * @return {string} blank string if visible, 'hidden' if invisible.\n */\nMapLabel.prototype.getVisible_ = function() {\n  var minZoom = /** @type number */(this.get('minZoom'));\n  var maxZoom = /** @type number */(this.get('maxZoom'));\n\n  if (minZoom === undefined && maxZoom === undefined) {\n    return '';\n  }\n\n  var map = this.getMap();\n  if (!map) {\n    return '';\n  }\n\n  var mapZoom = map.getZoom();\n  if (mapZoom < minZoom || mapZoom > maxZoom) {\n    return 'hidden';\n  }\n  return '';\n};\n\n/**\n * @inheritDoc\n */\nMapLabel.prototype.onRemove = function() {\n  var canvas = this.canvas_;\n  if (canvas && canvas.parentNode) {\n    canvas.parentNode.removeChild(canvas);\n  }\n};\nMapLabel.prototype['onRemove'] = MapLabel.prototype.onRemove;\n"]}